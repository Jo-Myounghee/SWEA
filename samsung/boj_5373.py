def clockRotate(p):
    global cube
    origin_cube = [cube[i][:] for i in range(len(cube))]

    if p == 'U':
        lst = [6, 3, 0, 7, 4, 1, 8, 5, 2,
               42, 10, 11, 43, 13, 14, 44, 16, 17,
               18, 19, 20, 21, 22, 23, 24, 25, 26,
               27, 28, 45, 30, 31, 46, 33, 34, 47,
               36, 37, 38, 39, 40, 41, 35, 32, 29,
               15, 12, 9, 48, 49, 50, 51, 52, 53]
    elif p == 'D':
        lst = [0, 1, 2, 3, 4, 5, 6, 7, 8,
               9, 10, 53, 12, 13, 52, 15, 16, 51,
               24, 21, 18, 25, 22, 19, 26, 23, 20,
               38, 28, 29, 37, 31, 32, 36, 34, 35,
               11, 14, 17, 39, 40, 41, 42, 43, 44,
               45, 46, 47, 48, 49, 50, 27, 30, 33]
    elif p == 'F':
        lst = [0, 1, 2, 3, 4, 5, 33, 34, 35,
               9, 10, 11, 12, 13, 14, 6, 7, 8,
               18, 19, 20, 21, 22, 23, 15, 16, 17,
               27, 28, 29, 30, 31, 32, 24, 25, 26,
               36, 37, 38, 39, 40, 41, 42, 43, 44,
               51, 48, 45, 52, 49, 46, 53, 50, 47]
    elif p == 'B':
        lst = [9, 10, 11, 3, 4, 5, 6, 7, 8,
               18, 19, 20, 12, 13, 14, 15, 16, 17,
               27, 28, 29, 21, 22, 23, 24, 25, 26,
               0, 1, 2, 30, 31, 32, 33, 34, 35,
               42, 39, 36, 43, 40, 37, 44, 41, 38,
               45, 46, 47, 48, 49, 50, 51, 52, 53]
    elif p == 'L':
        lst = [36, 1, 2, 39, 4, 5, 42, 7, 8,
               9, 10, 11, 12, 13, 14, 15, 16, 17,
               18, 19, 51, 21, 22, 48, 24, 25, 45,
               33, 30, 27, 34, 31, 28, 35, 32, 29,
               26, 37, 38, 23, 40, 41, 20, 43, 44,
               0, 46, 47, 3, 49, 50, 6, 52, 53]
    elif p == 'R':
        lst = [0, 1, 47, 3, 4, 50, 6, 7, 53,
               15, 12, 9, 16, 13, 10, 17, 14, 11,
               44, 19, 20, 41, 22, 23, 38, 25, 26,
               27, 28, 29, 30, 31, 32, 33, 34, 35,
               36, 37, 2, 39, 40, 5, 42, 43, 8,
               45, 46, 24, 48, 49, 21, 51, 52, 18]

    for i in range(54):
        cube[i] = origin_cube[lst[i]]

T = int(input())
for _ in range(T):
    N = int(input())
    inputs = list(map(str, input().split()))

    cube = ['w']*9 + ['b']*9 + ['y']*9 + ['g']*9 + ['o']*9 + ['r']*9

    for i in range(N):
        if inputs[i][1] == '+':
            clockRotate(inputs[i][0])
        else:
            clockRotate(inputs[i][0])
            clockRotate(inputs[i][0])
            clockRotate(inputs[i][0])
    for i in range(3):
        print(*cube[i*3:i*3+3], sep="")

'''
4
1
L-
2
F+ B+
4
U- D- L+ R+
10
L- U- L+ U- L- U- U- L+ U+ U+

1
5
U- D+ R+ U+ R-

4
1
R+
3
R+ R+ R+
1
R-
3
R- R- R-


'''